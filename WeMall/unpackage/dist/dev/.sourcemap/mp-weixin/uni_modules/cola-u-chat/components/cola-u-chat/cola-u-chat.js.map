{"version":3,"sources":["webpack:///E:/Jerry_前端代码/WeMall/WeMall/uni_modules/cola-u-chat/components/cola-u-chat/cola-u-chat.vue?e787","webpack:///E:/Jerry_前端代码/WeMall/WeMall/uni_modules/cola-u-chat/components/cola-u-chat/cola-u-chat.vue?8afb","webpack:///E:/Jerry_前端代码/WeMall/WeMall/uni_modules/cola-u-chat/components/cola-u-chat/cola-u-chat.vue?d77d","webpack:///E:/Jerry_前端代码/WeMall/WeMall/uni_modules/cola-u-chat/components/cola-u-chat/cola-u-chat.vue?ea46","uni-app:///uni_modules/cola-u-chat/components/cola-u-chat/cola-u-chat.vue","webpack:///E:/Jerry_前端代码/WeMall/WeMall/uni_modules/cola-u-chat/components/cola-u-chat/cola-u-chat.vue?0f07","webpack:///E:/Jerry_前端代码/WeMall/WeMall/uni_modules/cola-u-chat/components/cola-u-chat/cola-u-chat.vue?71a2"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoI;AACpI;AAC+D;AACL;AACsC;;;AAGhG;AAC0N;AAC1N,gBAAgB,iOAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,kGAAM;AACR,EAAE,2GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAA82B,CAAgB,y3BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsDl4B;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA,mBADA;AAEA,oBAFA,EADA;;AAKA;AACA,kBADA;AAEA;AACA,0BADA;AAEA,wBAFA;AAGA,sBAHA;AAIA,4BAJA;AAKA,oBALA;AAMA,0BANA;AAOA,sBAPA,IAFA,EALA;;;AAiBA;AACA,4BADA;AAEA,iBAFA,EAjBA;;AAqBA;AACA;AACA,kBADA,EAtBA;;AAyBA;AACA,kBADA;AAEA,mBAFA,EAzBA;;AA6BA;AACA,kBADA;AAEA,wBAFA,EA7BA;;AAiCA;AACA,iBADA;AAEA,+CAFA,EAjCA;;AAqCA;AACA,kBADA;AAEA,qCAFA,EArCA;;AAyCA;AACA,2BADA;AAEA,qCAFA,EAzCA;;AA6CA;AACA,iBADA;AAEA;AACA,oBADA;AAEA,uBAFA;AAGA,iBAHA;AAIA;AACA,oBADA;AAEA,wBAFA;AAGA,iBAHA,EAJA,GAFA,EA7CA;;;AAyDA;AACA,kBADA;AAEA,mBAFA,EAzDA;;AA6DA;AACA,mBADA;AAEA,oBAFA,EA7DA,EAhCA;;;AAkGA,MAlGA,kBAkGA;AACA;AACA,cADA;AAEA,oBAFA;AAGA,uBAHA;AAIA,0BAJA;AAKA,sBALA;AAMA,qBANA;AAOA,uBAPA;AAQA,wBARA;AASA,oBATA;AAUA,qBAVA;;AAYA,GA/GA;AAgHA,SAhHA,qBAgHA;AACA;;;;;;;;AAQA;AACA,GA1HA;AA2HA;AACA;AACA,aADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA,OAPA;AAQA;AACA,gBATA,EADA;;AAYA;AACA,aADA,mBACA,GADA,EACA,MADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,EAGA,GAHA;AAIA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OArBA;AAsBA,qBAtBA;AAuBA,gBAvBA,EAZA,EA3HA;;;AAiKA;AACA,iBADA,yBACA,CADA,EACA;AACA;AACA;AACA;AACA;AACA,KANA;AAOA,aAPA,uBAOA;AACA;AACA,KATA;AAUA,YAVA,sBAUA;AACA;AACA;AACA,KAbA;AAcA,aAdA,uBAcA;AACA;AACA,KAhBA;AAiBA,cAjBA,wBAiBA;AACA;AACA,KAnBA;AAoBA,gBApBA,0BAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5BA;AA6BA,aA7BA,uBA6BA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA,KAxCA;AAyCA,UAzCA,kBAyCA,GAzCA,EAyCA;AACA;AACA,mBADA;AAEA;AACA,2CADA;AAEA;AACA;AACA,WAJA;AAKA;AACA;AACA,WAPA,EAFA;;;AAYA,KAtDA;AAuDA,cAvDA,wBAuDA;AACA;AACA;AACA;AACA,KA3DA;AA4DA,eA5DA,uBA4DA,KA5DA,EA4DA;AACA;AACA,KA9DA;AA+DA,eA/DA,uBA+DA,GA/DA,EA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA,OANA,MAMA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA;AAGA;AACA,SANA;AAOA;AACA;AACA,KApFA,EAjKA,E;;;;;;;;;;;;;ACtDA;AAAA;AAAA;AAAA;AAAqoD,CAAgB,glDAAG,EAAC,C;;;;;;;;;;;ACAzpD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/cola-u-chat/components/cola-u-chat/cola-u-chat.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./cola-u-chat.vue?vue&type=template&id=22030248&scoped=true&\"\nvar renderjs\nimport script from \"./cola-u-chat.vue?vue&type=script&lang=js&\"\nexport * from \"./cola-u-chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cola-u-chat.vue?vue&type=style&index=0&id=22030248&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22030248\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/cola-u-chat/components/cola-u-chat/cola-u-chat.vue\"\nexport default component.exports","export * from \"-!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cola-u-chat.vue?vue&type=template&id=22030248&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uInput: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-input/u-input\" */ \"@/uni_modules/uview-ui/components/u-input/u-input.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cola-u-chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cola-u-chat.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<scroll-view :refresher-enabled=\"isUseRefresh\" :refresher-threshold=\"100\" refresher-default-style=\"white\" :refresher-triggered=\"isFresh\" refresher-background=\"#F2F2F2\" @refresherrestore=\"onRestore\" @refresherrefresh=\"scrollRefresh\" @tap=\"changeIs\" :enable-back-to-top=\"true\" :show-scrollbar=\"false\" :scroll-y=\"true\" class=\"cola-message\" :scroll-into-view=\"chatViewId\">\r\n\t\t\t<!-- <view v-for=\"(item, index) in msgData\" :key=\"index\" :id=\"'id-'+item.time\" class=\"cola-message__msg\"> -->\r\n\t\t\t<view\r\n\t\t\t\tv-for=\"(msgItem, msgIndex) in selfMsgData\"\r\n\t\t\t\t:key=\"msgIndex\"\r\n\t\t\t\t:id=\"'id-' + msgItem[IDType]\"\r\n\t\t\t\t:style=\"{ 'flex-direction': msgItem[dataKeys['userId']] === userId ? 'row-reverse' : 'row' }\"\r\n\t\t\t\tclass=\"cola-message__msg__line\"\r\n\t\t\t>\r\n\t\t\t\t<image class=\"cola-message__msg__line__photo\" :src=\"msgItem[dataKeys['avator']]\" mode=\"\"></image>\r\n\t\t\t\t<view\n\t\t\t\t\tv-if=\"msgItem[dataKeys['message']]!==''\"\r\n\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\tmsgItem[dataKeys['userId']] === userId ? 'self-body' : 'other-body',\r\n\t\t\t\t\t\tmsgItem[dataKeys['userId']] === userId ? 'msgBody-rg' : 'msgBody-lf'\r\n\t\t\t\t\t]\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{{ msgItem[dataKeys['message']] }}\r\n\t\t\t\t</view>\n\t\t\t\t<image @tap=\"imgTap(msgItem[dataKeys['img']])\" v-else :src=\"msgItem[dataKeys['img']]\" class=\"self-img\" mode=\"\"></image>\r\n\t\t\t\t<view class=\"isRead\">\n\t\t\t\t\t{{msgItem[dataKeys['read']]?'已读':'未读'}}\n\t\t\t\t</view>\n\t\t\t</view>\r\n\t\t\t<!-- </view> -->\r\n\t\t</scroll-view>\n\t\t<view :style=\"{'bottom':(keybordMove?'400':'0')+'rpx'}\" class=\"bottom-keyboard\">\n\t\t\t<view class=\"cola-keyboard\">\n\t\t\t\t<!-- <image v-if=\"isUseVoice\" src=\"\" class=\"cola-keyboard__voice\" mode=\"\"></image> -->\n\t\t\t\t<u-icon size=\"40\" name=\"mic\"></u-icon>\n\t\t\t\t<view class=\"cola-keyboard__input\"><u-input :focus=\"inputFocus\" @tap=\"clickInput\" @confirm=\"inputConfirm\" :disabled=\"inputDisabled\" v-model=\"text\"></u-input></view>\n\t\t\t\t<!-- <image class=\"cola-keyboard__expression\" src=\"\" mode=\"\"></image> -->\n\t\t\t\t<u-icon size=\"40\" class=\"cola-keyboard__expression\" name=\"star\"></u-icon>\n\t\t\t\t<!-- <image class=\"cola-keyboard__more\" src=\"\" mode=\"\"></image> -->\n\t\t\t\t<u-icon @tap=\"moreButton\" size=\"40\" class=\"cola-keyboard__more\" name=\"plus\"></u-icon>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"bottom-more\" :style=\"{'height':(moreIsShow? '400' : '0')+'rpx'}\">\n\t\t\t<view @tap=\"buttonClick(index)\" v-for=\"(item,index) in moreFunction\" :key=\"index\" class=\"bottom-more__block\">\n\t\t\t\t<view class=\"bottom-more__block__img\">\n\t\t\t\t\t<image class=\"bottom-more__block__img__icon\" v-if=\"item.img!==''\" src=\"\" mode=\"\"></image>\n\t\t\t\t\t<u-icon :size=\"iconSize\" class=\"bottom-more__block__img__icon\" v-else :name=\"item.icon\"></u-icon>\n\t\t\t\t</view>\n\t\t\t\t<text>\n\t\t\t\t\t{{item.name}}\n\t\t\t\t</text>\n\t\t\t</view>\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\n\t/*\n\t\t* 接收值：\n\t\t* userId：用户的id\n\t\t* userIdName：用户ID的键名\n\t\t* IDType：设置要绑定的消息ID，滚动需要\n\t\t* msgName：消息数据的绑定键名\n\t\t* messageData：基础展示数据\n\t\t* updateMsg：更新的数据，对象形式\n\t\t* historyMsg：历史数据，对象或数组形式\n\t\t* moreFunction：更多功能的显示，数组对象形式\n\t\t* iconSize：图标显示大小，默认60rpx\n\t\t* isUseRefresh：是否开启下拉刷新\n\t\t* \n\t\t* \n\t\t* 数据：\n\t\t* text：文本框输入内容\n\t\t* chatViewId：如果超出当前屏幕，翻滚跟踪到最后一条\n\t\t* inputFocus：光标是否集中\n\t\t* inputDisabled：是否禁止使用输入框\n\t\t* TODO 没有语音输入\n\t\t* isUseVoice：是否使用语音输入\n\t\t* selfMsgData：内部的数据保存\n\t\t* moreIsShow：是否显示更多功能\n\t\t* keybordMove：输入框键盘动画\n\t\t* isFresh：是否触发下拉刷新\n\t\t* \n\t\t* \n\t\t* 功能：\n\t\t* moreClick：更多功能的点击项\n\t\t* sendMsg：发送消息\n\t*/\n\tprops:{\n\t\tisUseRead:{\n\t\t\ttype:Boolean,\n\t\t\tdefault:false\n\t\t},\n\t\tdataKeys:{\n\t\t\ttype:Object,\n\t\t\tdefault:()=>({\n\t\t\t\tuserId:'userId',\n\t\t\t\tmsgId:'msgId',\n\t\t\t\tname:'name',\n\t\t\t\tmessage:'message',\n\t\t\t\timg:'img',\n\t\t\t\tavator:'avator',\n\t\t\t\tread:'read'\n\t\t\t})\n\t\t},\n\t\tuserId:{\n\t\t\ttype:String||Number,\n\t\t\tdefault:''\n\t\t},\n\t\t// 已废弃\n\t\tuserIdName:{\n\t\t\ttype:String\n\t\t},\n\t\tIDType:{\n\t\t\ttype:String,\n\t\t\tdefault:'id'\n\t\t},\n\t\tmsgName:{\n\t\t\ttype:String,\n\t\t\tdefault:'message'\n\t\t},\n\t\tmessageData:{\n\t\t\ttype:Array,\n\t\t\tdefault:()=> []\n\t\t},\n\t\tupdateMsg:{\n\t\t\ttype:Object,\n\t\t\tdefault:()=>{}\n\t\t},\n\t\thistoryMsg:{\n\t\t\ttype:[Object,Array],\n\t\t\tdefault:()=>{}\n\t\t},\n\t\tmoreFunction:{\n\t\t\ttype:Array,\n\t\t\tdefault:()=>[{\n\t\t\t\tname:'照片',\n\t\t\t\ticon:'photo',\n\t\t\t\timg:''\n\t\t\t},{\n\t\t\t\tname:'拍摄',\n\t\t\t\ticon:'camera',\n\t\t\t\timg:''\n\t\t\t}]\n\t\t},\n\t\ticonSize:{\n\t\t\ttype:String,\n\t\t\tdefault:'60'\n\t\t},\n\t\tisUseRefresh:{\n\t\t\ttype:Boolean,\n\t\t\tdefault:false\n\t\t}\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttext: '',\r\n\t\t\tchatViewId: '',\r\n\t\t\tinputFocus: false,\r\n\t\t\tinputDisabled: false,\n\t\t\tisUseVoice:true,\n\t\t\tselfMsgData:[],\n\t\t\tmoreIsShow:false,\n\t\t\tkeybordMove:false,\n\t\t\tisFresh:false,\n\t\t\tfreshing:false\r\n\t\t};\r\n\t},\n\tmounted() {\n\t\t/*\n\t\tuserId:'101',\n\t\tmsgId: Math.random().toFixed(4)*10000,\n\t\tname: '我的大聪明啊',\n\t\tmessage: '',\n\t\timg:'https://iknow-pic.cdn.bcebos.com/d833c895d143ad4bb4400a7d8c025aafa40f0624',\n\t\tavator: ''\n\t\t*/\n\t\tthis.selfMsgData = this.fixSelfData(JSON.parse(JSON.stringify(this.messageData)))\n\t},\n\twatch:{\n\t\tupdateMsg:{\n\t\t\thandler(val){\n\t\t\t\tif(Object.keys(val)===0){\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.selfMsgData.push(this.fixSelfData(val))\n\t\t\t\tthis.setScroll();\n\t\t\t},\n\t\t\t// immediate:true,\n\t\t\tdeep:true\n\t\t},\n\t\thistoryMsg:{\n\t\t\thandler(val,oldVal){\n\t\t\t\tif(val===oldVal){\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.isFresh=false\n\t\t\t\t\tthis.freshing=false\n\t\t\t\t},500)\n\t\t\t\tconst valueType = Object.prototype.toString.call(val);\n\t\t\t\tif(valueType==='[object Object]'){\n\t\t\t\t\tthis.selfMsgData.unshift(val)\n\t\t\t\t}else if(valueType==='[object Array]'){\n\t\t\t\t\t// val = val.reverse()\n\t\t\t\t\tval = this.fixSelfData(val)\n\t\t\t\t\tconst len = val.length\n\t\t\t\t\tlet num = 0\n\t\t\t\t\tfor(num;num<len;num++){\n\t\t\t\t\t\tthis.selfMsgData.unshift(val[num])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\timmediate:true,\n\t\t\tdeep:true\n\t\t}\n\t},\r\n\tmethods: {\n\t\tscrollRefresh(e){\n\t\t\t if (this.freshing) return;\n\t\t\t this.freshing = true;\n\t\t\t this.isFresh=true;\n\t\t\t this.$emit('refresh');\n\t\t},\n\t\tonRestore(){\n\t\t\tthis.isFresh='restore'\n\t\t},\n\t\tchangeIs(){\n\t\t\tthis.moreIsShow=false\n\t\t\tthis.keybordMove=false\n\t\t},\n\t\tvoiceLong(){\n\t\t\tconsole.log('录音')\n\t\t},\r\n\t\tclickInput() {\r\n\t\t\tthis.inputFocus = false;\r\n\t\t},\r\n\t\tinputConfirm() {\n\t\t\tif(this.text===''){\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.inputFocus=false\n\t\t\tthis.$emit('sendMsg',this.text)\n\t\t\tthis.text=''\n\t\t\t// this.inputFocus = true;\r\n\t\t},\r\n\t\tsetScroll() {\r\n\t\t\tlet len = this.selfMsgData.length - 1;\r\n\t\t\tconst id = this.selfMsgData[len][this.IDType];\r\n\t\t\t// 我这里的id的设置规则是自己想的\r\n\t\t\t// 只要不会重复 并且不事纯number就行\r\n\t\t\tthis.chatViewId = 'id-' + id;\n\t\t\t// #ifdef H5\n\t\t\tuni.pageScrollTo({\n\t\t\t\tselector:'#'+this.chatViewId\n\t\t\t})\n\t\t\t// #endif\r\n\t\t},\n\t\timgTap(img){\n\t\t\tuni.previewImage({\n\t\t\t    urls: [img],\n\t\t\t    longPressActions: {\n\t\t\t        itemList: ['发送给朋友', '保存图片', '收藏'],\n\t\t\t        success: function(data) {\n\t\t\t            console.log('选中了第' + (data.tapIndex + 1) + '个按钮,第' + (data.index + 1) + '张图片');\n\t\t\t        },\n\t\t\t        fail: function(err) {\n\t\t\t            console.log(err.errMsg);\n\t\t\t        }\n\t\t\t    }\n\t\t\t});\n\t\t},\n\t\tmoreButton(){\n\t\t\tuni.hideKeyboard()\n\t\t\tthis.keybordMove=true\n\t\t\tthis.moreIsShow=true\n\t\t},\n\t\tbuttonClick(index){\n\t\t\tthis.$emit('moreClick',index)\n\t\t},\n\t\tfixSelfData(arr){\n\t\t\tlet keyArr = Object.keys(this.dataKeys)\n\t\t\tlet valueArr = Object.values(this.dataKeys)\n\t\t\tconst valueType = Object.prototype.toString.call(arr);\n\t\t\tif(valueType==='[object Object]'){\n\t\t\t\tlet resultObj = {}\n\t\t\t\tkeyArr.forEach((keyItem,keyIndex)=>{\n\t\t\t\t\tresultObj[valueArr[keyIndex]] = arr[valueArr[keyIndex]]\n\t\t\t\t})\n\t\t\t\treturn resultObj\n\t\t\t}else if(valueType==='[object Array]'){\n\t\t\t\tlet resultArr = []\n\t\t\t\tarr.forEach((item,index)=>{\n\t\t\t\t\tlet resultObj = {}\n\t\t\t\t\tkeyArr.forEach((keyItem,keyIndex)=>{\n\t\t\t\t\t\tresultObj[valueArr[keyIndex]] = item[valueArr[keyIndex]]\n\t\t\t\t\t})\n\t\t\t\t\tresultArr.push(resultObj)\n\t\t\t\t})\n\t\t\t\treturn resultArr\n\t\t\t}\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.self-body {\r\n\tcolor: #fff;\r\n\tbackground-color: #19be6b;\r\n}\r\n.other-body {\r\n\tcolor: #000000;\r\n\tbackground-color: #fff;\r\n}\n@mixin msgBody {\n\tmax-width: 62%;\n\tpadding: 15rpx;\n\tmargin: 0 30rpx;\n\tborder-radius: 10rpx;\n\tposition: relative;\n\tword-spacing: normal;\n\tword-break:break-all;\n\tword-wrap:break-word;\n}\r\n.content {\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\t.cola-message {\r\n\t\twidth: 100%;\r\n\t\theight: calc(100vh - 140rpx);\r\n\t\tpadding: 30rpx;\r\n\t\tbackground-color: #f2f2f2;\r\n\t\tbox-sizing: border-box;\r\n\t\t&__msg {\r\n\t\t\twidth: 100%;\r\n\t\t\tmin-height: 40rpx;\r\n\t\t\t&__line {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: flex-start;\n\t\t\t\tposition: relative;\r\n\t\t\t\t&:nth-child(n + 2) {\r\n\t\t\t\t\tmargin-top: 40rpx;\r\n\t\t\t\t}\n\t\t\t\t.self-img{\n\t\t\t\t\twidth: 340rpx;\n\t\t\t\t\theight: 260rpx;\n\t\t\t\t\tmargin: 0 30rpx;\n\t\t\t\t\tborder-radius: 10rpx;\n\t\t\t\t}\r\n\t\t\t\t&__photo {\r\n\t\t\t\t\twidth: 100rpx;\r\n\t\t\t\t\theight: 100rpx;\r\n\t\t\t\t\tbackground-color: red;\r\n\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.msgBody-lf {\n\t\t\t\t\t@include msgBody()\n\t\t\t\t\t\r\n\t\t\t\t\t&::before {\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\tcontent: '';\r\n\t\t\t\t\t\twidth: 0;\r\n\t\t\t\t\t\theight: 0;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\tborder: 15rpx solid transparent;\r\n\t\t\t\t\t\tborder-right-color: #fff;\r\n\t\t\t\t\t\tleft: -26rpx;\r\n\t\t\t\t\t\ttop: 20rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\n\t\t\t\t.msgBody-rg{\n\t\t\t\t\t@include msgBody()\n\t\t\t\t\t\n\t\t\t\t\t&::before {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tcontent: '';\n\t\t\t\t\t\twidth: 0;\n\t\t\t\t\t\theight: 0;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tborder: 15rpx solid transparent;\n\t\t\t\t\t\tborder-left-color: #19BE6B;\n\t\t\t\t\t\tright: -26rpx;\n\t\t\t\t\t\ttop: 20rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.isRead{\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\tcolor: #B2B2B2;\n\t\t\t\t}\n\t\t\t\t.noRead{\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\tcolor: #00bc43;\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\n\t.bottom-keyboard{\n\t\twidth: 100%;\n\t\tmin-height: 140rpx;\n\t\tpadding: 30rpx 30rpx 0 30rpx;\n\t\tpadding-bottom: constant(safe-area-inset-bottom); // 核心代码\n\t\tpadding-bottom: env(safe-area-inset-bottom); // 核心代码\n\t\tbackground-color: #f6f6f6;\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\ttransition: bottom 0.5s;\n\t\tz-index: 99;\n\t\t.cola-keyboard {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-between;\n\t\t\t&__voice {\n\t\t\t\twidth: 60rpx;\n\t\t\t\theight: 60rpx;\n\t\t\t\tbackground-color: blue;\n\t\t\t}\n\t\t\t&__input {\n\t\t\t\t// margin-left: 30rpx;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 65%;\n\t\t\t\tpadding: 0 20rpx;\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tborder-radius: 10rpx;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t}\n\t\t\t&__expression {\n\t\t\t\t// width: 60rpx;\n\t\t\t\t// height: 60rpx;\n\t\t\t\t// margin-left: 30rpx;\n\t\t\t}\n\t\t\t&__more {\n\t\t\t\t// width: 60rpx;\n\t\t\t\t// height: 60rpx;\n\t\t\t\t// margin-left: 30rpx;\n\t\t\t}\n\t\t}\n\t}\r\n\t.bottom-more{\n\t\twidth: 100%;\n\t\tpadding: 0 30rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: space-between;\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\ttransition: height 0.5s;\n\t\tbackground-color: #F6F6F6;\n\t\t&__block{\n\t\t\twidth: 120rpx;\n\t\t\theight: 200rpx;\n\t\t\tmargin-top: 5rpx;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: center;\n\t\t\ttext-align: center;\n\t\t\t&:nth-child(n+2){\n\t\t\t\tmargin: 5rpx 0 0 32rpx;\n\t\t\t}\n\t\t\t&__img{\n\t\t\t\twidth: 120rpx;\n\t\t\t\theight: 120rpx;\n\t\t\t\tline-height: 150rpx;\n\t\t\t\ttext-align: center;\n\t\t\t\tbackground-color: #FFF;\n\t\t\t\tborder-radius: 20rpx;\n\t\t\t}\n\t\t\ttext{\n\t\t\t\tmargin-top: 10rpx;\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: #848588;\n\t\t\t}\n\t\t}\n\t\t&::after{\n\t\t\tdisplay: block;\n\t\t\tcontent: '';\n\t\t\tflex: 1;\n\t\t}\n\t}\r\n}\r\n</style>\n","import mod from \"-!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cola-u-chat.vue?vue&type=style&index=0&id=22030248&lang=scss&scoped=true&\"; export default mod; export * from \"-!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!H:\\\\Compiler\\\\Hbuilderx\\\\HBuilderX.3.2.12.20211029.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cola-u-chat.vue?vue&type=style&index=0&id=22030248&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1646652343898\n      var cssReload = require(\"H:/Compiler/Hbuilderx/HBuilderX.3.2.12.20211029.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}